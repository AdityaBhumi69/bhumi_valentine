<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Kiss Day</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}
:root {
  --primary: #FF1654;
  --secondary: #6C63FF;
  --accent: #FF6B9D;
  --dark: #0D0D14;
  --darker: #080810;
  --light: #FFFFFF;
  --muted: #8B8B9E;
}
html, body {
  width: 100%;
  height: 100%;
  overflow-x: hidden;
  overflow-y: auto;
  font-family: 'Inter', sans-serif;
  background: var(--darker);
  color: var(--light);
  -webkit-font-smoothing: antialiased;
  scroll-behavior: smooth;
}
.ambient-canvas {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  opacity: 0.6;
  will-change: opacity;
}
.wrapper {
  position: relative;
  z-index: 1;
  width: 100%;
  min-height: 100vh;
}
.header {
  position: sticky;
  top: 0;
  z-index: 100;
  padding: 20px 24px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: rgba(13, 13, 20, 0.95);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  will-change: transform;
}
.logo {
  font-family: 'Playfair Display', serif;
  font-size: 20px;
  font-weight: 600;
  letter-spacing: -0.5px;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
}
.kiss-badge {
  padding: 6px 16px;
  background: rgba(255, 22, 84, 0.1);
  border: 1.5px solid rgba(255, 22, 84, 0.3);
  border-radius: 50px;
  font-size: 13px;
  font-weight: 600;
  color: var(--primary);
  display: flex;
  align-items: center;
  gap: 8px;
}
.badge-count {
  font-size: 16px;
  font-weight: 700;
  color: var(--primary);
  text-shadow: 0 0 10px rgba(255, 22, 84, 0.6);
}
.hero {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 24px 60px;
  text-align: center;
  position: relative;
}
.date-tag {
  padding: 8px 20px;
  background: rgba(108, 99, 255, 0.1);
  border: 1px solid rgba(108, 99, 255, 0.3);
  border-radius: 50px;
  font-size: 11px;
  font-weight: 600;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  color: var(--secondary);
  margin-bottom: 24px;
  opacity: 0;
  animation: fadeIn 1s ease 0.3s forwards;
}
@keyframes fadeIn {
  to { opacity: 1; }
}
.hero-title {
  font-family: 'Playfair Display', serif;
  font-size: clamp(36px, 11vw, 78px);
  font-weight: 700;
  line-height: 1.1;
  margin-bottom: 16px;
  background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 50%, var(--secondary) 100%);
  background-size: 200% 200%;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: gradientShift 8s ease infinite, fadeIn 1s ease 0.5s forwards;
  opacity: 0;
}
@keyframes gradientShift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}
.hero-subtitle {
  font-size: clamp(15px, 4vw, 20px);
  color: var(--muted);
  font-weight: 400;
  margin-bottom: 50px;
  opacity: 0;
  animation: fadeIn 1s ease 0.7s forwards;
}
.kiss-stage {
  position: relative;
  width: 100%;
  max-width: 450px;
  height: 450px;
  margin: 0 auto 50px;
  opacity: 0;
  animation: scaleIn 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55) 0.9s forwards;
  will-change: transform, opacity;
}
@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.8);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
.particle-canvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  will-change: transform;
}
.couple-svg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  will-change: transform;
}
.figure {
  transition: all 2s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  will-change: transform;
}
.figure-left {
  transform: translateX(0);
}
.figure-right {
  transform: translateX(0);
}
.couple-svg.kissing .figure-left {
  transform: translateX(60px);
}
.couple-svg.kissing .figure-right {
  transform: translateX(-60px);
}
.kiss-glow {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 200px;
  height: 200px;
  background: radial-gradient(circle, rgba(255, 22, 84, 0.4), transparent 70%);
  border-radius: 50%;
  opacity: 0;
  transition: opacity 1s ease;
  filter: blur(40px);
  pointer-events: none;
  will-change: transform, opacity;
}
.couple-svg.kissing + .kiss-glow {
  opacity: 1;
  animation: glowPulse 2s ease-in-out infinite;
}
@keyframes glowPulse {
  0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
  50% { transform: translate(-50%, -50%) scale(1.3); opacity: 0.7; }
}
.energy-ring {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  border: 2px solid;
  opacity: 0;
  pointer-events: none;
  will-change: transform, opacity;
}
.ring-1 {
  width: 80%;
  height: 80%;
  border-color: rgba(255, 22, 84, 0.3);
  animation: ringPulse 3s ease-out infinite;
}
.ring-2 {
  width: 90%;
  height: 90%;
  border-color: rgba(108, 99, 255, 0.3);
  animation: ringPulse 3s ease-out infinite 0.5s;
}
.ring-3 {
  width: 100%;
  height: 100%;
  border-color: rgba(255, 107, 157, 0.3);
  animation: ringPulse 3s ease-out infinite 1s;
}
@keyframes ringPulse {
  0% {
    transform: translate(-50%, -50%) scale(0.8);
    opacity: 0;
  }
  50% {
    opacity: 0.6;
  }
  100% {
    transform: translate(-50%, -50%) scale(1.2);
    opacity: 0;
  }
}
.kiss-trigger {
  position: relative;
  width: 160px;
  height: 160px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  border: none;
  font-size: 16px;
  font-weight: 700;
  color: white;
  cursor: pointer;
  transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  box-shadow: 
    0 20px 60px rgba(255, 22, 84, 0.4),
    0 0 80px rgba(255, 22, 84, 0.2),
    inset 0 -10px 30px rgba(0, 0, 0, 0.3);
  overflow: hidden;
  opacity: 0;
  animation: fadeIn 1s ease 1.1s forwards;
  touch-action: manipulation;
  will-change: transform;
}
.kiss-trigger::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: conic-gradient(from 0deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  animation: rotate 4s linear infinite;
  will-change: transform;
}
@keyframes rotate {
  to { transform: rotate(360deg); }
}
.kiss-trigger::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  background: rgba(255, 255, 255, 0.3);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  transition: width 0.6s, height 0.6s;
}
.kiss-trigger:active::after {
  width: 400px;
  height: 400px;
}
.kiss-trigger:active {
  transform: scale(0.92);
}
.trigger-text {
  position: relative;
  z-index: 1;
  letter-spacing: 1px;
  text-transform: uppercase;
}
.kiss-trigger.active {
  animation: buttonPulse 1.5s ease;
}
@keyframes buttonPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.08); }
}
.section {
  padding: 60px 24px;
  max-width: 800px;
  margin: 0 auto;
}
.section-header {
  text-align: center;
  margin-bottom: 50px;
}
.section-label {
  display: inline-block;
  padding: 8px 20px;
  background: rgba(255, 22, 84, 0.1);
  border: 1px solid rgba(255, 22, 84, 0.3);
  border-radius: 50px;
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 1.2px;
  text-transform: uppercase;
  color: var(--primary);
  margin-bottom: 20px;
}
.section-title {
  font-family: 'Playfair Display', serif;
  font-size: clamp(28px, 8vw, 52px);
  font-weight: 700;
  margin-bottom: 16px;
  background: linear-gradient(135deg, var(--primary), var(--accent));
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
}
.section-desc {
  font-size: clamp(15px, 3.5vw, 17px);
  color: var(--muted);
  line-height: 1.6;
}
.cards-grid {
  display: grid;
  gap: 16px;
  margin-top: 36px;
}
.card {
  background: rgba(21, 21, 31, 0.4);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 20px;
  padding: 28px 24px;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
  touch-action: manipulation;
}
.card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 4px;
  background: linear-gradient(90deg, var(--primary), var(--secondary));
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 0.4s ease;
}
.card:active {
  transform: translateY(-2px) scale(0.98);
  border-color: rgba(255, 22, 84, 0.3);
}
.card:active::before {
  transform: scaleX(1);
}
.card-content {
  font-size: clamp(15px, 3.8vw, 18px);
  line-height: 1.7;
  color: rgba(255, 255, 255, 0.85);
}
.highlight {
  color: var(--accent);
  font-weight: 600;
}
.stats-box {
  background: linear-gradient(135deg, rgba(255, 22, 84, 0.1), rgba(108, 99, 255, 0.1));
  border: 2px solid rgba(255, 22, 84, 0.2);
  border-radius: 28px;
  padding: 40px 28px;
  margin: 50px 0;
  text-align: center;
  position: relative;
  overflow: hidden;
}
.stats-box::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(255, 22, 84, 0.1), transparent 60%);
  animation: rotateGlow 15s linear infinite;
  will-change: transform;
}
@keyframes rotateGlow {
  to { transform: rotate(360deg); }
}
.stats-content {
  position: relative;
  z-index: 1;
}
.stats-title {
  font-family: 'Playfair Display', serif;
  font-size: clamp(24px, 7vw, 42px);
  font-weight: 700;
  margin-bottom: 28px;
  color: var(--primary);
}
.stats-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 20px;
  margin-top: 28px;
}
.stat-item {
  background: rgba(13, 13, 20, 0.6);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 18px;
  padding: 24px 16px;
  transition: all 0.3s ease;
  touch-action: manipulation;
}
.stat-item:active {
  transform: scale(0.96);
  border-color: rgba(255, 22, 84, 0.3);
}
.stat-number {
  font-size: clamp(32px, 9vw, 52px);
  font-weight: 800;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 8px;
  line-height: 1;
}
.stat-label {
  font-size: 12px;
  color: var(--muted);
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.8px;
}
.message-card {
  background: rgba(21, 21, 31, 0.5);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 24px;
  padding: 36px 28px;
  margin: 50px 0;
  position: relative;
}
.message-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, transparent, var(--primary), var(--secondary), transparent);
  border-radius: 24px 24px 0 0;
}
.message-text {
  font-size: clamp(16px, 4vw, 19px);
  line-height: 1.8;
  color: rgba(255, 255, 255, 0.9);
  text-align: center;
  font-weight: 400;
}
.footer {
  text-align: center;
  padding: 50px 24px;
  border-top: 1px solid rgba(255, 255, 255, 0.05);
}
.footer-text {
  font-size: 14px;
  color: var(--muted);
}
.footer-accent {
  color: var(--primary);
  font-weight: 600;
}
.burst-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 999;
}
.burst-particle {
  position: absolute;
  width: 8px;
  height: 8px;
  background: var(--primary);
  border-radius: 50%;
  opacity: 0;
  box-shadow: 0 0 15px var(--primary);
  animation: burstOut 2.5s ease-out forwards;
  will-change: transform, opacity;
}
@keyframes burstOut {
  0% {
    transform: translate(0, 0) scale(0);
    opacity: 1;
  }
  100% {
    transform: translate(var(--tx), var(--ty)) scale(2);
    opacity: 0;
  }
}
@media (max-width: 768px) {
  .kiss-stage {
    height: 380px;
    max-width: 380px;
  }
  
  .kiss-trigger {
    width: 150px;
    height: 150px;
    font-size: 15px;
  }
  
  .stats-grid {
    grid-template-columns: 1fr;
  }

  .section {
    padding: 50px 20px;
  }

  .stats-box {
    padding: 32px 20px;
  }
}
@media (max-width: 480px) {
  .hero {
    padding-top: 60px;
  }
  
  .kiss-stage {
    height: 340px;
    max-width: 340px;
  }
  
  .kiss-trigger {
    width: 140px;
    height: 140px;
    font-size: 14px;
  }

  .stat-item {
    padding: 20px 12px;
  }
}
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
</style>
</head>
<body>
<canvas class="ambient-canvas" id="ambientCanvas"></canvas>
<div class="burst-overlay" id="burstOverlay"></div>
<div class="wrapper">
  <header class="header">
    <div class="logo">Kiss Day</div>
    <div class="kiss-badge">
      <span class="badge-count" id="kissCount">0</span>
    </div>
  </header>
  <section class="hero">
    <div class="date-tag">February 13, 2026</div>
    <h1 class="hero-title">Our First Kiss,<br>Forever Remembered</h1>
    <p class="hero-subtitle">One moment that changed everything</p>
    <div class="kiss-stage" id="kissStage">
      <canvas class="particle-canvas" id="particleCanvas"></canvas>
      
      <div class="energy-ring ring-1"></div>
      <div class="energy-ring ring-2"></div>
      <div class="energy-ring ring-3"></div>
      <svg class="couple-svg" id="coupleSvg" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="gradLeft" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#FF1654;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#FF6B9D;stop-opacity:1" />
          </linearGradient>
          <linearGradient id="gradRight" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#6C63FF;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#9D95FF;stop-opacity:1" />
          </linearGradient>
          <filter id="glow">
            <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
            <feMerge>
              <feMergeNode in="coloredBlur"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>
        
        <g class="figure figure-left">
          <ellipse cx="120" cy="140" rx="35" ry="40" fill="url(#gradLeft)" filter="url(#glow)"/>
          <path d="M 85 130 Q 80 110 100 100 Q 120 95 140 100 Q 155 110 150 130" fill="url(#gradLeft)" opacity="0.8"/>
          <ellipse cx="120" cy="220" rx="40" ry="65" fill="url(#gradLeft)" filter="url(#glow)"/>
          <path d="M 140 200 Q 170 200 180 210" stroke="url(#gradLeft)" stroke-width="12" fill="none" stroke-linecap="round" filter="url(#glow)"/>
        </g>
        
        <g class="figure figure-right">
          <ellipse cx="280" cy="140" rx="35" ry="40" fill="url(#gradRight)" filter="url(#glow)"/>
          <path d="M 245 125 Q 250 105 270 100 Q 290 100 305 110 Q 315 120 310 135" fill="url(#gradRight)" opacity="0.8"/>
          <ellipse cx="280" cy="220" rx="40" ry="65" fill="url(#gradRight)" filter="url(#glow)"/>
          <path d="M 260 200 Q 230 200 220 210" stroke="url(#gradRight)" stroke-width="12" fill="none" stroke-linecap="round" filter="url(#glow)"/>
        </g>
      </svg>
      <div class="kiss-glow"></div>
    </div>
    <button class="kiss-trigger" id="kissTrigger">
      <span class="trigger-text">Send Kiss</span>
    </button>
  </section>
  <section class="section">
    <div class="section-header">
      <div class="section-label">Memories</div>
      <h2 class="section-title">That One Kiss</h2>
      <p class="section-desc">The moment everything changed</p>
    </div>
    <div class="cards-grid">
      <div class="card">
        <p class="card-content">
          Time stopped. The world faded. It was just <span class="highlight">us</span>.
        </p>
      </div>
      <div class="card">
        <p class="card-content">
          Your lips, soft and warm, made my heart race like never before.
        </p>
      </div>
      <div class="card">
        <p class="card-content">
          In that moment, I knew—this is what I'd been <span class="highlight">waiting for</span>.
        </p>
      </div>
      <div class="card">
        <p class="card-content">
          Everything I felt but couldn't say became clear in that single kiss.
        </p>
      </div>
      <div class="card">
        <p class="card-content">
          The nervousness, the excitement, the <span class="highlight">pure connection</span>—unforgettable.
        </p>
      </div>
      <div class="card">
        <p class="card-content">
          I replay it in my mind constantly. Our first, but definitely not our last.
        </p>
      </div>
    </div>
  </section>
  <div class="stats-box">
    <div class="stats-content">
      <h2 class="stats-title">Your Kiss Counter</h2>
      
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-number" id="totalKisses">1</div>
          <div class="stat-label">Real Kiss</div>
        </div>
        
        <div class="stat-item">
          <div class="stat-number" id="virtualKisses">0</div>
          <div class="stat-label">Virtual Kisses</div>
        </div>
      </div>
    </div>
  </div>
  <div class="message-card">
    <p class="message-text">
      One kiss was all it took to know you're the one I want forever.
    </p>
  </div>
  <section class="section">
    <div class="section-header">
      <div class="section-label">Looking Forward</div>
      <h2 class="section-title">All The Kisses To Come</h2>
    </div>
    <div class="cards-grid">
      <div class="card">
        <p class="card-content">
          Morning kisses that start our days together.
        </p>
      </div>
      <div class="card">
        <p class="card-content">
          Random kisses just because I <span class="highlight">can't help myself</span>.
        </p>
      </div>
      <div class="card">
        <p class="card-content">
          Goodnight kisses before we fall asleep in each other's arms.
        </p>
      </div>
      <div class="card">
        <p class="card-content">
          Kisses in the rain, under streetlights, in quiet moments.
        </p>
      </div>
      <div class="card">
        <p class="card-content">
          Deep kisses that say everything words <span class="highlight">cannot</span>.
        </p>
      </div>
      <div class="card">
        <p class="card-content">
          A lifetime of kisses, each one as special as our first.
        </p>
      </div>
    </div>
  </section>
  <footer class="footer">
    <p class="footer-text">
      Created with <span class="footer-accent">endless love</span>
    </p>
    <p class="footer-text" style="opacity: 0.4; font-size: 12px; margin-top: 8px;">
      Kiss Day 2026 • Forever Yours
    </p>
  </footer>
</div>
<script>
const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
const targetFPS = isMobile ? 30 : 60;
const frameInterval = 1000 / targetFPS;

const ambientCanvas = document.getElementById('ambientCanvas');
const ambientCtx = ambientCanvas.getContext('2d', { alpha: true, desynchronized: true });

function resizeAmbient() {
  ambientCanvas.width = window.innerWidth;
  ambientCanvas.height = window.innerHeight;
}
resizeAmbient();

let resizeTimeout;
window.addEventListener('resize', () => {
  clearTimeout(resizeTimeout);
  resizeTimeout = setTimeout(resizeAmbient, 150);
});

class AmbientParticle {
  constructor() {
    this.reset();
  }
  reset() {
    this.x = Math.random() * ambientCanvas.width;
    this.y = Math.random() * ambientCanvas.height;
    this.size = Math.random() * 2 + 0.5;
    this.speedX = (Math.random() - 0.5) * 0.3;
    this.speedY = (Math.random() - 0.5) * 0.3;
    this.opacity = Math.random() * 0.3 + 0.1;
    this.hue = Math.random() * 60 + 320;
  }
  update() {
    this.x += this.speedX;
    this.y += this.speedY;
    if (this.x < 0 || this.x > ambientCanvas.width || 
        this.y < 0 || this.y > ambientCanvas.height) {
      this.reset();
    }
  }
  draw() {
    ambientCtx.globalAlpha = this.opacity;
    ambientCtx.fillStyle = `hsl(${this.hue}, 100%, 60%)`;
    ambientCtx.shadowBlur = 15;
    ambientCtx.shadowColor = `hsl(${this.hue}, 100%, 60%)`;
    ambientCtx.beginPath();
    ambientCtx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
    ambientCtx.fill();
    ambientCtx.shadowBlur = 0;
  }
}

const ambientParticleCount = isMobile ? 25 : 50;
const ambientParticles = [];
for (let i = 0; i < ambientParticleCount; i++) {
  ambientParticles.push(new AmbientParticle());
}

let lastAmbientFrame = 0;
function animateAmbient(timestamp) {
  if (timestamp - lastAmbientFrame >= frameInterval) {
    ambientCtx.fillStyle = 'rgba(8, 8, 16, 0.05)';
    ambientCtx.fillRect(0, 0, ambientCanvas.width, ambientCanvas.height);
    ambientParticles.forEach(p => {
      p.update();
      p.draw();
    });
    ambientCtx.globalAlpha = 1;
    lastAmbientFrame = timestamp;
  }
  requestAnimationFrame(animateAmbient);
}
requestAnimationFrame(animateAmbient);

const particleCanvas = document.getElementById('particleCanvas');
const particleCtx = particleCanvas.getContext('2d', { alpha: true, desynchronized: true });

function resizeParticle() {
  const container = particleCanvas.parentElement;
  particleCanvas.width = container.offsetWidth;
  particleCanvas.height = container.offsetHeight;
}
resizeParticle();

window.addEventListener('resize', () => {
  clearTimeout(resizeTimeout);
  resizeTimeout = setTimeout(resizeParticle, 150);
});

class StageParticle {
  constructor() {
    this.reset();
  }
  reset() {
    this.angle = Math.random() * Math.PI * 2;
    this.radius = Math.random() * 100 + 50;
    this.x = particleCanvas.width / 2 + Math.cos(this.angle) * this.radius;
    this.y = particleCanvas.height / 2 + Math.sin(this.angle) * this.radius;
    this.size = Math.random() * 3 + 1;
    this.speed = Math.random() * 0.01 + 0.005;
    this.opacity = Math.random() * 0.5 + 0.2;
    this.hue = Math.random() > 0.5 ? 340 : 260;
  }
  update() {
    this.angle += this.speed;
    this.x = particleCanvas.width / 2 + Math.cos(this.angle) * this.radius;
    this.y = particleCanvas.height / 2 + Math.sin(this.angle) * this.radius;
  }
  draw() {
    particleCtx.globalAlpha = this.opacity;
    particleCtx.fillStyle = `hsl(${this.hue}, 100%, 60%)`;
    particleCtx.shadowBlur = 10;
    particleCtx.shadowColor = `hsl(${this.hue}, 100%, 60%)`;
    particleCtx.beginPath();
    particleCtx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
    particleCtx.fill();
    particleCtx.shadowBlur = 0;
  }
}

const stageParticleCount = isMobile ? 20 : 30;
const stageParticles = [];
for (let i = 0; i < stageParticleCount; i++) {
  stageParticles.push(new StageParticle());
}

let lastStageFrame = 0;
function animateStage(timestamp) {
  if (timestamp - lastStageFrame >= frameInterval) {
    particleCtx.fillStyle = 'rgba(13, 13, 20, 0.1)';
    particleCtx.fillRect(0, 0, particleCanvas.width, particleCanvas.height);
    stageParticles.forEach(p => {
      p.update();
      p.draw();
    });
    particleCtx.globalAlpha = 1;
    lastStageFrame = timestamp;
  }
  requestAnimationFrame(animateStage);
}
requestAnimationFrame(animateStage);

let virtualKissCount = parseInt(localStorage.getItem('virtualKissCount') || '0');
document.getElementById('kissCount').textContent = virtualKissCount;
document.getElementById('virtualKisses').textContent = virtualKissCount;

const kissTrigger = document.getElementById('kissTrigger');
const coupleSvg = document.getElementById('coupleSvg');
const kissStage = document.getElementById('kissStage');
const burstOverlay = document.getElementById('burstOverlay');

kissTrigger.addEventListener('click', () => {
  kissStage.scrollIntoView({ 
    behavior: 'smooth', 
    block: 'center',
    inline: 'center'
  });

  setTimeout(() => {
    virtualKissCount++;
    document.getElementById('kissCount').textContent = virtualKissCount;
    document.getElementById('virtualKisses').textContent = virtualKissCount;
    localStorage.setItem('virtualKissCount', virtualKissCount);

    kissTrigger.classList.add('active');
    setTimeout(() => kissTrigger.classList.remove('active'), 1500);

    coupleSvg.classList.add('kissing');

    setTimeout(() => {
      createBurst();
    }, 1000);

    setTimeout(() => {
      coupleSvg.classList.remove('kissing');
    }, 3000);

    if ('vibrate' in navigator) {
      navigator.vibrate([40, 30, 40, 30, 100]);
    }
  }, 400);
});

function createBurst() {
  const rect = kissTrigger.getBoundingClientRect();
  const centerX = rect.left + rect.width / 2;
  const centerY = rect.top + rect.height / 2;

  const burstCount = isMobile ? 20 : 30;
  
  for (let i = 0; i < burstCount; i++) {
    setTimeout(() => {
      const particle = document.createElement('div');
      particle.className = 'burst-particle';
      const angle = Math.random() * Math.PI * 2;
      const distance = 100 + Math.random() * 150;
      const tx = Math.cos(angle) * distance;
      const ty = Math.sin(angle) * distance;
      particle.style.left = centerX + 'px';
      particle.style.top = centerY + 'px';
      particle.style.setProperty('--tx', tx + 'px');
      particle.style.setProperty('--ty', ty + 'px');
      burstOverlay.appendChild(particle);
      setTimeout(() => particle.remove(), 2500);
    }, i * (isMobile ? 40 : 30));
  }
}

document.addEventListener('touchstart', () => {}, { passive: true });
document.addEventListener('touchmove', () => {}, { passive: true });
</script>
</body>
</html>